# generated by scripts/grn-crd.ts. DO NOT EDIT!
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: emailpolicies.kube-mail.helmich.me
spec:
  group: kube-mail.helmich.me
  scope: Namespaced
  names:
    kind: EmailPolicy
    plural: emailpolicies
  versions:
    - name: v1alpha1
      served: true
      storage: true
  additionalPrinterColumns:
    - JSONPath: .spec.default
      name: default
      type: boolean
      description: describes if this is the default policy
    - JSONPath: .spec.sink.smtp.server
      name: SMTP server
      type: string
      description: which SMTP server mails are forwarded to
    - name: Age
      type: date
      JSONPath: .metadata.creationTimestamp
  validation:
    openAPIV3Schema:
      $schema: 'http://json-schema.org/draft-07/schema#'
      type: object
      properties:
        spec:
          type: object
          properties:
            default:
              type: boolean
            podSelector:
              type: object
              properties:
                matchLabels:
                  type: object
                  additionalProperties:
                    type: string
            ratelimiting:
              type: object
              properties:
                maximum:
                  type: number
                period:
                  type: string
                  enum:
                    - hour
                    - minute
              required:
                - maximum
            sink:
              type: object
              properties:
                smtp:
                  type: object
                  properties:
                    server:
                      type: object
                      properties:
                        name:
                          type: string
                        namespace:
                          type: string
                      required:
                        - name
                    credentials:
                      type: object
                      properties:
                        name:
                          type: string
                        namespace:
                          type: string
                      required:
                        - name
                  required:
                    - server
              required:
                - smtp
          required:
            - sink
      required:
        - spec
